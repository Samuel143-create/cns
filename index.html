<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>CNS ‚Äì Resultados Electorales</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<h1>Consejo Nacional Samuel (CNS)</h1>

<div class="card">

  <p class="total">
    <strong>Total de votos v√°lidos:</strong>
    <span id="total-votos">Cargando‚Ä¶</span>
  </p>

  <div id="sello" class="sello preliminar">
    RESULTADOS PRELIMINARES
  </div>

  <table id="tabla-resultados">
    <tr>
      <th>Partido</th>
      <th>Candidato</th>
      <th>Votos</th>
      <th>Porcentaje</th>
    </tr>

    <tr data-votos="1480195">
      <td><img src="https://elecciones-hnd-publicacion-prod-us-east-1.s3.us-east-1.amazonaws.com/Logos/Candidatos/000_0005.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIATNSYFO5EYDYMH46K%2F20251224%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20251224T180401Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=199ee6b7087106cdc400cb82e78576bd6897cbe73ac7ff84b74affa25269fc9f" width="30"> PARTIDO NACIONAL</td>
      <td>NASRY JUAN ASFURA</td>
      <td>1,480,195</td>
      <td class="grafica"><div class="barra"><span></span></div></td>
    </tr>

    <tr data-votos="1453090">
      <td><img src="https://elecciones-hnd-publicacion-prod-us-east-1.s3.us-east-1.amazonaws.com/Logos/Candidatos/000_0004.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIATNSYFO5EYDYMH46K%2F20251224%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20251224T180401Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=a4895224e0393326e7cc0eb120bea1cd507a0311bee09bf83e2e2c1a36324ce7" width="30"> PARTIDO LIBERAL</td>
      <td>SALVADOR NASRALLA</td>
      <td>1,453,090</td>
      <td class="grafica"><div class="barra"><span></span></div></td>
    </tr>

    <tr data-votos="705572">
      <td><img src="https://elecciones-hnd-publicacion-prod-us-east-1.s3.us-east-1.amazonaws.com/Logos/Candidatos/000_0002.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIATNSYFO5EYDYMH46K%2F20251224%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20251224T180401Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=ea46ceda0020cfc98efb9d435194ae7ab28f64b20d20e10767e6d7db0d3ec21b" width="30"> LIBRE</td>
      <td>RIXI MONCADA</td>
      <td>705,572</td>
      <td class="grafica"><div class="barra"><span></span></div></td>
    </tr>

    <tr data-votos="29988">
      <td><img src="https://elecciones-hnd-publicacion-prod-us-east-1.s3.us-east-1.amazonaws.com/Logos/Candidatos/000_0003.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIATNSYFO5EYDYMH46K%2F20251224%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20251224T180401Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=cde8765824403d3df2df5e664f3364e6c1727739d0abab16cf47fb363bf8c37e" width="30"> PINU</td>
      <td>JORGE √ÅVILA</td>
      <td>29,988</td>
      <td class="grafica"><div class="barra"><span></span></div></td>
    </tr>

    <tr data-votos="6442">
      <td><img src="https://elecciones-hnd-publicacion-prod-us-east-1.s3.us-east-1.amazonaws.com/Logos/Candidatos/000_0001.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIATNSYFO5EYDYMH46K%2F20251224%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20251224T180401Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=c01017a2a4f73fc69a5854c0570e91a121d0e9d50df48bc499f4b02b1a0ef199" width="30"> DC</td>
      <td>MARIO RIVERA</td>
      <td>6,442</td>
      <td class="grafica"><div class="barra"><span></span></div></td>
    </tr>
  </table>
</div>

<!-- ===== GR√ÅFICA CIRCULAR ===== -->
<div class="card">
  <h2>Distribuci√≥n de Votos</h2>
  <canvas id="graficaCircular" width="300" height="300"></canvas>
</div>

<!-- ===== LIVE ===== -->
<div class="card">
  <h2>Live CNE ‚Äì Escrutinio Especial</h2>
  <iframe
    src="https://www.youtube.com/embed/IGFCeC7CR_o"
    allowfullscreen>
  </iframe>
</div>

<!-- ===== FOOTER ===== -->
<div class="card footer">
  <p><strong>√öltima actualizaci√≥n:</strong> 24/12/2025 12:30</p>
  <p>Actualizaci√≥n autom√°tica cada 5 minutos.</p>
  <p>Datos transcritos manualmente desde el sitio oficial del CNE.</p>
</div>

<script>
  let filas = Array.from(document.querySelectorAll('#tabla-resultados tr[data-votos]'));

  // ordenar por votos
  filas.sort((a, b) => b.dataset.votos - a.dataset.votos);
  filas.forEach(f => f.parentNode.appendChild(f));

  let total = 0;
  let max = 0;
  let ganador = null;

  filas.forEach(fila => {
    const votos = parseInt(fila.dataset.votos);
    total += votos;
    if (votos > max) {
      max = votos;
      ganador = fila;
    }
  });

  document.getElementById('total-votos').textContent = total.toLocaleString();
  if (ganador) ganador.classList.add('ganador');

  filas.forEach(fila => {
    const votos = parseInt(fila.dataset.votos);
    const porcentaje = ((votos / total) * 100).toFixed(2);
    const span = fila.querySelector('.barra span');
    span.style.width = porcentaje + '%';
    span.textContent = porcentaje + '%';
  });

  // ===== GR√ÅFICA CIRCULAR =====
  const canvas = document.getElementById('graficaCircular');
  const ctx = canvas.getContext('2d');
  const colores = ['#003366','#0066cc','#cc0000','#ff9900','#666'];
  let inicio = 0;

  filas.forEach((fila, i) => {
    const votos = parseInt(fila.dataset.votos);
    const angulo = (votos / total) * Math.PI * 2;

    ctx.beginPath();
    ctx.moveTo(150,150);
    ctx.arc(150,150,140,inicio,inicio+angulo);
    ctx.fillStyle = colores[i % colores.length];
    ctx.fill();

    inicio += angulo;
  });

  // ===== MODO OSCURO AUTOM√ÅTICO =====
  const hora = new Date().getHours();
  if (hora >= 18 || hora < 6) {
    document.body.classList.add('oscuro');
  }
</script>
  
<!-- Bot√≥n chatbot -->
<div id="chatbot-btn" onclick="toggleChat()">ü§ñ</div>

<!-- Ventana chatbot -->
<div id="chatbot">
  <div class="chat-header">
    Asistente CNS
    <span onclick="toggleChat()">‚úñ</span>
  </div>

  <div id="chat-messages"></div>

  <div class="chat-input">
    <input id="chat-input" placeholder="Escribe tu pregunta..." />
    <button onclick="enviar()">Enviar</button>
  </div>
</div>

<script src="script.js"></script>

</body>
</html>
